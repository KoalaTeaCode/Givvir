<header class=opportunity-header >
  <div class=img-overlay></div>
  <div class=headline>
    <h1>{{opportunity.title}}</h1>
  </div>
</header>

<div class=container>

  <div class="details col-md-12" >
    <button class="btn btn-primary" ng-click="inviteMember()" >Invite</button>

    <!--- People Signed Up -->
    <div class=col-md-6>
      <div class="col-md-12">
        <h2>Members</h2>
        <button class="btn btn-primary" ng-click="joinOpportunity()" >Join</button>
      </div>
      <div class="col-md-12" ng-repeat="member in members">
        {{member._id}}
        {{member.status}}
        Signed Up {{member.signedUp}}
        Participated: {{member.participated}}
        <span ng-hide=editMember>{{member.hoursCompleted}}</span>
        <input type=text ng-model=member.hoursCompleted  ng-show=editMember />
        <!-- @TODO: Add checks to make sure message belongs to user -->
        <button class="btn btn-primary" ng-click="editMember=true" ng-hide=editMember >Edit</button>
        <button class="btn btn-primary" ng-click="editMember=false;updateMember(member)" ng-show=editMember >Save</button>
        <!-- @TODO: If user is equal to this member -->
        <button class="btn btn-primary" ng-click="leaveOpportunity(member)" >Leave</button>
        <!-- @TODO: If user can remove -->
        <button class="btn btn-primary" ng-click="removeMember(member)" >Remove</button>
        <button class="btn btn-primary" ng-click="markedParticipated(member)" >Participated</button>
      </div>
    </div>

    <!--- Chat -->
    <div class=col-md-6>
      <div class="col-md-12">
        <h2>Chat</h2>
      </div>
      <!-- Message Form -->
      <div class="col-md-12">
        <form ng-submit="addMessage()">
          <input type=text ng-model=messageToAdd.message placeholder="Message" />
          <input type=submit class="btn btn-primary" value="Post Message" />
        </form>
      </div>

      <div class="col-md-12" ng-repeat="message in messages">
        <span ng-hide=editMessage >{{message.message}}</span>
        <input type=text ng-model=message.message  ng-show=editMessage />
        <!-- @TODO: Add checks to make sure message belongs to user -->
        <button class="btn btn-primary" ng-click="editMessage=true" ng-hide=editMessage >Edit</button>
        <button class="btn btn-primary" ng-click="editMessage=false;updateMessage(message)" ng-show=editMessage >Save</button>
        <button class="btn btn-primary" ng-click="deleteMessage(message)" >Delete</button>
      </div>

    </div>
  </div>

</div>
